<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APITS - Anticipatory Prefill with Keystroke Streaming</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #0f0f1a;
            color: #e8e8e8;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }

        .slide-container {
            display: none;
        }

        .slide-container.active {
            display: block;
        }

        .slide {
            background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #0f0f1a 100%);
            width: 100vw;
            height: 100vh;
            padding: 60px 80px;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .slide::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(ellipse at 30% 20%, rgba(0, 212, 170, 0.06) 0%, transparent 50%),
                radial-gradient(ellipse at 70% 80%, rgba(99, 102, 241, 0.06) 0%, transparent 50%);
            pointer-events: none;
        }

        .slide>* {
            position: relative;
            z-index: 1;
        }

        .slide-header {
            border-bottom: 3px solid;
            border-image: linear-gradient(90deg, #00d4aa, #6366f1) 1;
            padding-bottom: 20px;
            margin-bottom: 40px;
        }

        .slide-title {
            font-size: 48px;
            font-weight: 700;
            background: linear-gradient(135deg, #00d4aa 0%, #6366f1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .slide-subtitle {
            font-size: 24px;
            color: #888;
            margin-top: 10px;
        }

        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        /* Title Slide */
        .title-slide {
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .title-slide .slide-title {
            font-size: 56px;
            margin-bottom: 30px;
            line-height: 1.3;
        }

        .authors {
            font-size: 26px;
            color: #e0e0e0;
            margin-bottom: 15px;
        }

        .institution {
            font-size: 22px;
            color: #888;
            margin-bottom: 40px;
        }

        .hook-box {
            background: rgba(0, 212, 170, 0.1);
            border: 1px solid rgba(0, 212, 170, 0.3);
            padding: 25px 40px;
            border-radius: 15px;
            font-size: 24px;
            color: #00d4aa;
            font-style: italic;
        }

        /* Section Slide */
        .section-slide {
            justify-content: center;
            align-items: center;
            text-align: center;
            background: linear-gradient(135deg, #00d4aa 0%, #6366f1 100%);
        }

        .section-slide::before {
            display: none;
        }

        .section-number {
            font-size: 140px;
            font-weight: 800;
            color: rgba(255, 255, 255, 0.15);
        }

        .section-title {
            font-size: 52px;
            font-weight: 700;
            color: white;
        }

        .section-subtitle {
            font-size: 24px;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 15px;
        }

        /* Lists */
        .bullet-list {
            list-style: none;
            font-size: 26px;
            line-height: 1.8;
        }

        .bullet-list li {
            margin-bottom: 20px;
            padding-left: 35px;
            position: relative;
        }

        .bullet-list li::before {
            content: "→";
            position: absolute;
            left: 0;
            color: #00d4aa;
            font-weight: bold;
        }

        /* Boxes */
        .highlight-box {
            background: rgba(0, 212, 170, 0.08);
            border-left: 4px solid #00d4aa;
            padding: 25px 30px;
            margin: 20px 0;
            border-radius: 0 12px 12px 0;
            font-size: 24px;
        }

        .highlight-box.purple {
            border-left-color: #6366f1;
            background: rgba(99, 102, 241, 0.08);
        }

        .highlight-box.orange {
            border-left-color: #f59e0b;
            background: rgba(245, 158, 11, 0.08);
        }

        .highlight-box.red {
            border-left-color: #ef4444;
            background: rgba(239, 68, 68, 0.08);
        }

        /* Code */
        .code-block {
            background: #1e1e2e;
            padding: 25px 30px;
            border-radius: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 22px;
            line-height: 1.6;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .code-block .keyword {
            color: #c792ea;
        }

        .code-block .string {
            color: #a6e3a1;
        }

        .code-block .comment {
            color: #6c7086;
        }

        .code-block .number {
            color: #fab387;
        }

        /* Grid */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: start;
        }

        .three-boxes {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
        }

        .four-boxes {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        /* Stat Boxes */
        .stat-box {
            background: rgba(99, 102, 241, 0.15);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(99, 102, 241, 0.3);
        }

        .stat-box .number {
            font-size: 42px;
            font-weight: 800;
            background: linear-gradient(135deg, #00d4aa 0%, #6366f1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-box .label {
            font-size: 20px;
            color: #888;
            margin-top: 8px;
        }

        .stat-box.green {
            background: rgba(0, 212, 170, 0.15);
            border-color: rgba(0, 212, 170, 0.3);
        }

        .stat-box.green .number {
            background: #00d4aa;
            -webkit-background-clip: text;
        }

        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 24px;
            margin: 20px 0;
        }

        .data-table th {
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.3), rgba(99, 102, 241, 0.3));
            padding: 18px 20px;
            text-align: left;
            font-weight: 600;
        }

        .data-table td {
            padding: 16px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .data-table tr:hover {
            background: rgba(0, 212, 170, 0.05);
        }

        .speedup {
            color: #00d4aa;
            font-weight: 700;
        }

        .baseline {
            color: #ef4444;
        }

        /* Diagram */
        .diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .diagram-box {
            background: rgba(99, 102, 241, 0.15);
            border: 2px solid #6366f1;
            border-radius: 12px;
            padding: 20px 30px;
            font-size: 22px;
            font-weight: 600;
            color: #6366f1;
        }

        .diagram-box.green {
            border-color: #00d4aa;
            color: #00d4aa;
            background: rgba(0, 212, 170, 0.15);
        }

        .arrow {
            font-size: 36px;
            color: #6366f1;
        }

        /* Key Finding */
        .key-finding {
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.2), rgba(99, 102, 241, 0.2));
            border: 1px solid rgba(0, 212, 170, 0.4);
            padding: 25px 35px;
            border-radius: 15px;
            font-size: 28px;
            font-weight: 600;
            text-align: center;
            margin: 25px 0;
            color: #00d4aa;
        }

        /* Process Steps */
        .process-step {
            display: flex;
            align-items: center;
            gap: 20px;
            background: rgba(99, 102, 241, 0.08);
            padding: 20px 25px;
            border-radius: 12px;
            border-left: 4px solid #6366f1;
            margin-bottom: 15px;
        }

        .step-number {
            background: linear-gradient(135deg, #00d4aa, #6366f1);
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 22px;
            flex-shrink: 0;
        }

        .step-text {
            font-size: 24px;
        }

        /* Navigation */
        .slide-indicator {
            position: fixed;
            bottom: 30px;
            right: 40px;
            background: linear-gradient(135deg, #00d4aa, #6366f1);
            color: white;
            padding: 15px 28px;
            border-radius: 30px;
            font-size: 22px;
            font-weight: 600;
            z-index: 1000;
        }

        strong {
            color: #00d4aa;
        }

        h3 {
            font-size: 28px;
            color: #6366f1;
            margin-bottom: 20px;
        }

        h4 {
            font-size: 24px;
            color: #00d4aa;
            margin-bottom: 12px;
        }
    </style>
</head>

<body>
    <!-- SLIDE 1: Title -->
    <div class="slide-container active" data-slide="1">
        <div class="slide title-slide">
            <h1 class="slide-title">Anticipatory Prefill with<br>Keystroke Streaming</h1>
            <p class="slide-subtitle" style="font-size: 28px; color: #888; margin-bottom: 30px;">Interactive Text-to-SQL
                Optimization</p>
            <p class="authors">R. Dalaoui, R. Hanader, S. Taider, R. Vialleton, S. Wang, L. Zhang</p>
            <p class="institution">INSA Lyon - Department of Computer Science</p>
            <div class="hook-box">"What if your SQL query was already being processed before you finished typing?"</div>
        </div>
    </div>

    <!-- SLIDE 2: Section - Text-to-SQL -->
    <div class="slide-container" data-slide="2">
        <div class="slide section-slide">
            <div class="section-number">01</div>
            <h2 class="section-title">Text-to-SQL & Industry Context</h2>
            <p class="section-subtitle">Understanding the technology and its adoption</p>
        </div>
    </div>

    <!-- SLIDE 3: What is Text-to-SQL -->
    <div class="slide-container" data-slide="3">
        <div class="slide">
            <div class="slide-header">
                <h1 class="slide-title">What is Text-to-SQL?</h1>
                <p class="slide-subtitle">Democratizing database access with natural language</p>
            </div>
            <div class="content">
                <div class="two-column">
                    <div>
                        <p style="font-size: 26px; color: #b0b0b0; margin-bottom: 25px;">
                            Convert <strong>natural language questions</strong> into <strong>SQL queries</strong>
                            automatically.
                        </p>
                        <div class="highlight-box" style="margin-bottom: 25px;">
                            <h4>Example</h4>
                            <p style="color: #888;">"How many customers are in France?"</p>
                            <div class="code-block" style="margin-top: 15px; font-size: 20px;">
                                <span class="keyword">SELECT</span> <span class="function">COUNT</span>(*) <span
                                    class="keyword">FROM</span> customers
                                <span class="keyword">WHERE</span> country = <span class="string">'France'</span>;
                            </div>
                        </div>
                        <ul class="bullet-list" style="font-size: 24px;">
                            <li>No SQL knowledge required</li>
                            <li>Business users can self-serve analytics</li>
                            <li>LLMs achieve >80% accuracy on benchmarks</li>
                        </ul>
                    </div>
                    <div>
                        <h3>Industry Adoption</h3>
                        <div class="highlight-box purple">
                            <h4 style="color: #6366f1;">Enterprise DBMS</h4>
                            <p style="color: #888;">Oracle 23c AI, Azure SQL Copilot, Snowflake Natural Language</p>
                        </div>
                        <div class="highlight-box purple">
                            <h4 style="color: #6366f1;">Data Platforms</h4>
                            <p style="color: #888;">Apache Spark NL, Databricks AI Assistant, BigQuery NL</p>
                        </div>
                        <div class="highlight-box purple">
                            <h4 style="color: #6366f1;">Developer Tools</h4>
                            <p style="color: #888;">GitHub Copilot for SQL, JetBrains AI, VS Code SQL extensions</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SLIDE 4: Section - Problem -->
    <div class="slide-container" data-slide="4">
        <div class="slide section-slide">
            <div class="section-number">02</div>
            <h2 class="section-title">The Problem</h2>
            <p class="section-subtitle">Why accuracy isn't everything</p>
        </div>
    </div>

    <!-- SLIDE 5: Problem Statement -->
    <div class="slide-container" data-slide="5">
        <div class="slide">
            <div class="slide-header">
                <h1 class="slide-title">The Latency Problem</h1>
                <p class="slide-subtitle">Macro → Meso → Micro problem formulation</p>
            </div>
            <div class="content">
                <div class="diagram" style="margin-bottom: 25px; gap: 15px;">
                    <div class="diagram-box" style="padding: 12px 20px; font-size: 16px;">
                        <strong style="color: #6366f1;">Macro</strong><br>
                        <span style="color: #888;">LLM Text-to-SQL has latency issues</span>
                    </div>
                    <span class="arrow" style="font-size: 24px;">→</span>
                    <div class="diagram-box" style="padding: 12px 20px; font-size: 16px;">
                        <strong style="color: #6366f1;">Meso</strong><br>
                        <span style="color: #888;">Prefill phase dominates TTFT</span>
                    </div>
                    <span class="arrow" style="font-size: 24px;">→</span>
                    <div class="diagram-box" style="padding: 12px 20px; font-size: 16px;">
                        <strong style="color: #6366f1;">Micro</strong><br>
                        <span style="color: #888;">Typing time is wasted (3-10s idle)</span>
                    </div>
                </div>
                <div class="two-column">
                    <div>
                        <div class="highlight-box red" style="border-left-color: #ef4444;">
                            <h4 style="color: #ef4444;">Time-To-First-Token (TTFT)</h4>
                            <p style="color: #888; font-size: 22px;">
                                Delay between pressing "Enter" and seeing the first response character.
                            </p>
                            <p style="font-size: 28px; color: #ef4444; font-weight: 700; margin-top: 10px;">
                                Typical: 300-800ms
                            </p>
                        </div>
                        <div class="highlight-box orange" style="margin-top: 15px;">
                            <h4 style="color: #f59e0b;">Growing Complexity</h4>
                            <ul style="color: #888; font-size: 20px; margin-top: 8px; list-style: none;">
                                <li>• Larger schemas, more tokens</li>
                                <li>• Prompt size: 500-2000+ tokens</li>
                            </ul>
                        </div>
                    </div>
                    <div>
                        <h3>The Wasted Opportunity</h3>
                        <div class="process-step" style="border-left-color: #ef4444; padding: 15px 20px;">
                            <div class="step-number"
                                style="background: #ef4444; width: 35px; height: 35px; font-size: 18px;">1</div>
                            <div class="step-text" style="font-size: 20px;">User types query: <strong>3-10
                                    seconds</strong></div>
                        </div>
                        <div class="process-step" style="border-left-color: #ef4444; padding: 15px 20px;">
                            <div class="step-number"
                                style="background: #ef4444; width: 35px; height: 35px; font-size: 18px;">2</div>
                            <div class="step-text" style="font-size: 20px;">Backend sits <strong>completely
                                    idle</strong></div>
                        </div>
                        <div class="process-step" style="border-left-color: #ef4444; padding: 15px 20px;">
                            <div class="step-number"
                                style="background: #ef4444; width: 35px; height: 35px; font-size: 18px;">3</div>
                            <div class="step-text" style="font-size: 20px;">Only starts work <strong>after
                                    submission</strong></div>
                        </div>
                        <div class="key-finding" style="margin-top: 20px; font-size: 22px;">
                            Key Insight: Exploit typing time!
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- SLIDE 6: Section - LLM Basics -->
    <div class="slide-container" data-slide="6">
        <div class="slide section-slide">
            <div class="section-number">03</div>
            <h2 class="section-title">How LLM Inference Works</h2>
            <p class="section-subtitle">The technical foundation</p>
        </div>
    </div>

    <!-- SLIDE 7: Two Phase Process -->
    <div class="slide-container" data-slide="7">
        <div class="slide">
            <div class="slide-header">
                <h1 class="slide-title">Two-Phase Inference</h1>
                <p class="slide-subtitle">Understanding where the time goes</p>
            </div>
            <div class="content">
                <div class="diagram" style="margin-bottom: 40px;">
                    <div class="diagram-box"
                        style="background: rgba(239,68,68,0.15); border-color: #ef4444; color: #ef4444;">
                        <div style="font-size: 32px; font-weight: 700;">PREFILL</div>
                        <div style="font-size: 20px; margin-top: 8px;">Process ALL input tokens</div>
                        <div style="font-size: 18px; color: #888; margin-top: 5px;">200-800ms ⏱️</div>
                    </div>
                    <span class="arrow">→</span>
                    <div class="diagram-box green">
                        <div style="font-size: 32px; font-weight: 700;">GENERATION</div>
                        <div style="font-size: 20px; margin-top: 8px;">Produce output tokens</div>
                        <div style="font-size: 18px; color: #888; margin-top: 5px;">10-50ms per token</div>
                    </div>
                </div>
                <div class="two-column">
                    <div>
                        <h3 style="color: #ef4444;">Prefill Phase (The Bottleneck)</h3>
                        <ul class="bullet-list" style="font-size: 24px;">
                            <li>Processes system prompt + schema + user query</li>
                            <li>Builds the <strong>KV-Cache</strong> (attention memory)</li>
                            <li>Dominates TTFT for long prompts</li>
                            <li>User waits for this to complete</li>
                        </ul>
                    </div>
                    <div>
                        <h3>Generation Phase (Fast)</h3>
                        <ul class="bullet-list" style="font-size: 24px;">
                            <li>Produces one token at a time</li>
                            <li>Uses cached attention values</li>
                            <li>Relatively fast per token</li>
                            <li>User sees streaming output</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SLIDE 8: KV-Cache Explained -->
    <div class="slide-container" data-slide="8">
        <div class="slide">
            <div class="slide-header">
                <h1 class="slide-title">The KV-Cache</h1>
                <p class="slide-subtitle">Why transformers need memory</p>
            </div>
            <div class="content">
                <div class="two-column">
                    <div>
                        <div class="highlight-box" style="margin-bottom: 25px;">
                            <h4>What is Attention?</h4>
                            <p style="color: #888; font-size: 24px;">
                                Each word looks at <strong>all previous words</strong> to understand context.
                            </p>
                        </div>
                        <div class="highlight-box purple">
                            <h4 style="color: #6366f1;">Without Cache: O(n²)</h4>
                            <p style="color: #888; font-size: 22px;">
                                Every new token recomputes attention over all previous tokens. Extremely slow!
                            </p>
                        </div>
                        <div class="highlight-box" style="margin-top: 20px;">
                            <h4>With KV-Cache: O(n)</h4>
                            <p style="color: #888; font-size: 22px;">
                                Store Key and Value projections. Only compute attention for new tokens.
                            </p>
                        </div>
                    </div>
                    <div>
                        <h3>Cache Structure</h3>
                        <div class="code-block" style="font-size: 18px;">
                            <pre style="margin: 0; font-family: inherit;"><span class="comment"># DynamicCache per layer</span>
cache = DynamicCache()

<span class="comment"># After processing "Hello world"</span>
cache.key[layer] → [K₁, K₂]
cache.value[layer] → [V₁, V₂]

<span class="comment"># Add new token</span>
cache.key[layer] → [K₁, K₂, K₃]
cache.value[layer] → [V₁, V₂, V₃]</pre>
                        </div>
                        <div class="key-finding" style="margin-top: 25px; font-size: 24px;">
                            The cache grows as tokens are added.<br>Our idea: grow it during typing!
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SLIDE 9: Section - Solution -->
    <div class="slide-container" data-slide="9">
        <div class="slide section-slide">
            <div class="section-number">04</div>
            <h2 class="section-title">Our Solution</h2>
            <p class="section-subtitle">Anticipatory Prefill with Keystroke Streaming</p>
        </div>
    </div>

    <!-- SLIDE 10: Core Idea -->
    <div class="slide-container" data-slide="10">
        <div class="slide">
            <div class="slide-header">
                <h1 class="slide-title">Anticipatory Prefill</h1>
                <p class="slide-subtitle">Stream keystrokes, build cache incrementally</p>
            </div>
            <div class="content">
                <div
                    style="display: flex; flex-direction: column; align-items: center; margin-bottom: 30px; gap: 15px;">
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div class="diagram-box" style="padding: 15px 20px; font-size: 18px;">Frontend</div>
                        <span class="arrow" style="font-size: 28px;">→</span>
                        <div class="diagram-box" style="padding: 15px 20px; font-size: 18px;">WebSocket</div>
                        <span class="arrow" style="font-size: 28px;">→</span>
                        <div class="diagram-box" style="padding: 15px 20px; font-size: 18px;">StreamController</div>
                        <span class="arrow" style="font-size: 28px;">→</span>
                        <div class="diagram-box green" style="padding: 15px 20px; font-size: 18px;">KVCacheManager</div>
                        <span class="arrow" style="font-size: 28px;">→</span>
                        <div class="diagram-box"
                            style="border-color: #f59e0b; color: #f59e0b; padding: 15px 20px; font-size: 18px;">GPU
                        </div>
                    </div>
                    <div style="font-size: 20px; color: #888; font-style: italic;">Keystrokes stream in real-time via
                        WebSocket</div>
                </div>
                <div class="two-column">
                    <div>
                        <h3>How It Works</h3>
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-text">User types, keystrokes stream in real-time</div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-text">Wait for word boundaries (space, punctuation)</div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-text">Tokenize and extend the KV-cache</div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-text">On submit: cache is already warm!</div>
                        </div>
                    </div>
                    <div>
                        <h3>Key Design Decisions</h3>
                        <div class="highlight-box">
                            <h4>Boundary-Based Confirmation</h4>
                            <p style="color: #888; font-size: 22px;">
                                Only commit tokens after whitespace/punctuation. Avoids wasted computation on incomplete
                                words.
                            </p>
                        </div>
                        <div class="highlight-box purple" style="margin-top: 15px;">
                            <h4 style="color: #6366f1;">Debouncing (300ms)</h4>
                            <p style="color: #888; font-size: 22px;">
                                Wait briefly before extending. Prevents excessive GPU calls during fast typing.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SLIDE 11: Extend Operation -->
    <div class="slide-container" data-slide="11">
        <div class="slide">
            <div class="slide-header">
                <h1 class="slide-title">Extend: Adding Tokens</h1>
                <p class="slide-subtitle">Growing the cache incrementally</p>
            </div>
            <div class="content">
                <div class="two-column">
                    <div>
                        <h3>The Algorithm</h3>
                        <div class="code-block" style="font-size: 19px;">
                            <span class="keyword">def</span> <span class="function">extend</span>(new_text):
                            <span class="comment"># 1. Tokenize full text</span>
                            full_ids = tokenize(base_prompt + confirmed + new_text)

                            <span class="comment"># 2. Get only new tokens</span>
                            delta_ids = full_ids[len(current_cache):]

                            <span class="comment"># 3. Forward pass on delta only</span>
                            <span class="keyword">if</span> len(delta_ids) > <span class="number">0</span>:
                            model.forward(delta_ids, past_kv=cache)
                            cache.update(new_keys, new_values)

                            <span class="comment"># 4. Update confirmed text</span>
                            confirmed += new_text
                        </div>
                    </div>
                    <div>
                        <h3>Handling Tokenizer Merging</h3>
                        <div class="highlight-box orange">
                            <h4 style="color: #f59e0b;">The Problem</h4>
                            <p style="color: #888; font-size: 22px;">
                                Tokenizing "hel" → different tokens than "hello".<br>
                                The last token can <strong>change</strong>, not just append!
                            </p>
                        </div>
                        <div class="highlight-box" style="margin-top: 20px;">
                            <h4>Our Solution</h4>
                            <p style="color: #888; font-size: 22px;">
                                Detect merges by comparing expected vs actual token count.<br>
                                If merged: <strong>crop(n-1)</strong> then re-extend.
                            </p>
                        </div>
                        <div class="key-finding" style="margin-top: 20px; font-size: 22px;">
                            Forward pass on delta only = O(Δn) not O(n)
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SLIDE 12: Crop Operation -->
    <div class="slide-container" data-slide="12">
        <div class="slide">
            <div class="slide-header">
                <h1 class="slide-title">Crop: Handling Deletions</h1>
                <p class="slide-subtitle">Efficient rollback when users edit</p>
            </div>
            <div class="content">
                <div class="two-column">
                    <div>
                        <div class="highlight-box red" style="border-left-color: #ef4444; margin-bottom: 25px;">
                            <h4 style="color: #ef4444;">The Challenge</h4>
                            <p style="color: #888; font-size: 24px;">
                                User types "Hello worl" then backspaces.<br>
                                Cached tokens for "worl" are now invalid!
                            </p>
                        </div>
                        <div class="highlight-box" style="margin-bottom: 25px;">
                            <h4>Naive Approach ❌</h4>
                            <p style="color: #888; font-size: 24px;">
                                Recompute entire cache from scratch.<br>
                                <strong>Expensive</strong> - loses all the benefit!
                            </p>
                        </div>
                        <div class="highlight-box" style="background: rgba(0,212,170,0.15); border-color: #00d4aa;">
                            <h4>Our Approach ✓</h4>
                            <p style="color: #888; font-size: 24px;">
                                <code style="color: #00d4aa;">cache.crop(target_length)</code><br>
                                <strong>O(1) tensor slicing!</strong>
                            </p>
                        </div>
                    </div>
                    <div>
                        <h3>How Crop Works</h3>
                        <div class="code-block" style="font-size: 18px;">
                            <pre style="margin: 0; font-family: inherit;"><span class="comment"># DynamicCache.crop() - built-in!</span>

<span class="comment"># Before: cache has 50 tokens</span>
cache.get_seq_length()  <span class="comment"># → 50</span>

<span class="comment"># User deleted text, need 45 tokens</span>
cache.crop(<span class="number">45</span>)

<span class="comment"># After: instant truncation</span>
cache.get_seq_length()  <span class="comment"># → 45</span>

<span class="comment"># Now extend from position 45</span></pre>
                        </div>
                        <div class="key-finding" style="margin-top: 25px; font-size: 22px;">
                            Rollback is instant, just re-extend the delta
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SLIDE 13: Correctness -->
    <div class="slide-container" data-slide="13">
        <div class="slide">
            <div class="slide-header">
                <h1 class="slide-title">Correctness Guarantee</h1>
                <p class="slide-subtitle">Same output as standard inference</p>
            </div>
            <div class="content" style="align-items: center;">
                <div style="max-width: 900px;">
                    <div class="highlight-box" style="margin-bottom: 30px;">
                        <h4>At Submission Time</h4>
                        <p style="color: #888; font-size: 26px;">
                            The KV-cache exactly represents the tokenization of:<br>
                            <code
                                style="color: #00d4aa; font-size: 24px;">base_prompt + confirmed_text + pending_text</code>
                        </p>
                    </div>
                    <div class="three-boxes">
                        <div class="stat-box green">
                            <div class="number">✓</div>
                            <div class="label">No approximation</div>
                        </div>
                        <div class="stat-box green">
                            <div class="number">✓</div>
                            <div class="label">Identical tokens</div>
                        </div>
                        <div class="stat-box green">
                            <div class="number">✓</div>
                            <div class="label">Same generation</div>
                        </div>
                    </div>
                    <div class="key-finding" style="margin-top: 40px;">
                        The only difference: cache was built incrementally during typing,<br>not all at once after
                        submission.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SLIDE 14: Section - Evaluation -->
    <div class="slide-container" data-slide="14">
        <div class="slide section-slide">
            <div class="section-number">05</div>
            <h2 class="section-title">Evaluation Framework</h2>
            <p class="section-subtitle">Design choices and expected outcomes</p>
        </div>
    </div>

    <!-- SLIDE 15: Model Choice -->
    <div class="slide-container" data-slide="15">
        <div class="slide">
            <div class="slide-header">
                <h1 class="slide-title">Why Qwen2.5-Coder-1.5B?</h1>
                <p class="slide-subtitle">Model selection rationale</p>
            </div>
            <div class="content">
                <div class="two-column">
                    <div>
                        <div class="highlight-box" style="margin-bottom: 20px;">
                            <h4>SQL/Code Capability</h4>
                            <p style="color: #888; font-size: 24px;">
                                State-of-the-art for sub-3B models. Specifically trained on code and SQL tasks.
                            </p>
                        </div>
                        <div class="highlight-box purple" style="margin-bottom: 20px;">
                            <h4 style="color: #6366f1;">Efficient Tokenization</h4>
                            <p style="color: #888; font-size: 24px;">
                                152K vocabulary vs Llama's 32K. Fewer tokens = faster prefill.
                            </p>
                        </div>
                        <div class="highlight-box" style="margin-bottom: 20px;">
                            <h4>GQA Architecture</h4>
                            <p style="color: #888; font-size: 24px;">
                                Grouped Query Attention = smaller KV-cache memory footprint.
                            </p>
                        </div>
                        <div class="highlight-box purple">
                            <h4 style="color: #6366f1;">DynamicCache Support</h4>
                            <p style="color: #888; font-size: 24px;">
                                Full support for <code style="color: #6366f1;">extend()</code> and <code
                                    style="color: #6366f1;">crop()</code> operations.
                            </p>
                        </div>
                    </div>
                    <div>
                        <h3>The Right Balance</h3>
                        <div class="stat-box" style="margin-bottom: 20px;">
                            <div class="number">1.5B</div>
                            <div class="label">Parameters - fits on consumer GPU</div>
                        </div>
                        <div class="stat-box green" style="margin-bottom: 20px;">
                            <div class="number">~3GB</div>
                            <div class="label">VRAM in float16</div>
                        </div>
                        <div class="stat-box" style="margin-bottom: 20px;">
                            <div class="number">~70%</div>
                            <div class="label">Execution accuracy on Spider</div>
                        </div>
                        <div class="key-finding" style="font-size: 22px;">
                            Fast enough for real-time,<br>smart enough for SQL
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SLIDE 16: Metrics -->
    <div class="slide-container" data-slide="16">
        <div class="slide">
            <div class="slide-header">
                <h1 class="slide-title">Why These Metrics?</h1>
                <p class="slide-subtitle">What we measure and why</p>
            </div>
            <div class="content">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Metric</th>
                            <th>Definition</th>
                            <th>Why It Matters</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>TTFT</strong></td>
                            <td>Time from submit to first token</td>
                            <td class="speedup">Our primary goal - user-perceived latency</td>
                        </tr>
                        <tr>
                            <td><strong>Execution Accuracy</strong></td>
                            <td>Does SQL return correct results?</td>
                            <td>Proves we don't sacrifice quality for speed</td>
                        </tr>
                        <tr>
                            <td><strong>Exact Match</strong></td>
                            <td>Is SQL identical to gold?</td>
                            <td>Stricter correctness check</td>
                        </tr>
                        <tr>
                            <td><strong>Memory Usage</strong></td>
                            <td>RAM and GPU memory</td>
                            <td>Important trade-off to monitor</td>
                        </tr>
                    </tbody>
                </table>
                <div class="highlight-box" style="margin-top: 30px;">
                    <h4>Expected Memory Trade-off</h4>
                    <p style="color: #888; font-size: 24px;">
                        Our approach keeps the KV-cache alive during typing session.<br>
                        Baseline only allocates during generation.<br>
                        <strong>Trade-off: Slightly more memory for much lower latency.</strong>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- SLIDE 17: Dataset Info -->
    <div class="slide-container" data-slide="17">
        <div class="slide">
            <div class="slide-header">
                <h1 class="slide-title">Evaluation Dataset</h1>
                <p class="slide-subtitle">Spider benchmark - standard for Text-to-SQL</p>
            </div>
            <div class="content">
                <div class="three-boxes" style="margin-bottom: 40px;">
                    <div class="stat-box">
                        <div class="number">378</div>
                        <div class="label">Total test cases</div>
                    </div>
                    <div class="stat-box">
                        <div class="number">3</div>
                        <div class="label">Database schemas</div>
                    </div>
                    <div class="stat-box green">
                        <div class="number">2</div>
                        <div class="label">Evaluation modes</div>
                    </div>
                </div>
                <div class="three-boxes">
                    <div class="highlight-box">
                        <h4>car_1</h4>
                        <p style="color: #888; font-size: 22px;">
                            Cars, makers, countries<br>
                            6 tables, complex JOINs
                        </p>
                    </div>
                    <div class="highlight-box purple">
                        <h4 style="color: #6366f1;">world_1</h4>
                        <p style="color: #888; font-size: 22px;">
                            Countries, cities, languages<br>
                            3 tables, geographic queries
                        </p>
                    </div>
                    <div class="highlight-box">
                        <h4>dog_kennels</h4>
                        <p style="color: #888; font-size: 22px;">
                            Dogs, owners, treatments<br>
                            7 tables, relational patterns
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SLIDE 18: Section - Demo -->
    <div class="slide-container" data-slide="18">
        <div class="slide section-slide">
            <div class="section-number">06</div>
            <h2 class="section-title">Live Demo</h2>
            <p class="section-subtitle">~1 minute demonstration</p>
        </div>
    </div>

    <!-- SLIDE 19: Section - Results -->
    <div class="slide-container" data-slide="19">
        <div class="slide section-slide">
            <div class="section-number">07</div>
            <h2 class="section-title">Final Results</h2>
            <p class="section-subtitle">378 test cases, full evaluation</p>
        </div>
    </div>

    <!-- SLIDE 20: TTFT Results -->
    <div class="slide-container" data-slide="20">
        <div class="slide">
            <div class="slide-header">
                <h1 class="slide-title">TTFT Comparison</h1>
                <p class="slide-subtitle">The main metric: how much faster?</p>
            </div>
            <div class="content">
                <table class="data-table" style="max-width: 800px; margin: 0 auto 40px auto;">
                    <thead>
                        <tr>
                            <th>Mode</th>
                            <th>Average TTFT</th>
                            <th>Speedup</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Baseline (Cold Start)</strong></td>
                            <td class="baseline">629 ms</td>
                            <td>1.0x</td>
                        </tr>
                        <tr>
                            <td><strong>APITS (Ours)</strong></td>
                            <td class="speedup">64 ms</td>
                            <td class="speedup">~10x</td>
                        </tr>
                    </tbody>
                </table>
                <div class="key-finding" style="font-size: 36px;">
                    10x TTFT Reduction
                </div>
                <div class="three-boxes" style="margin-top: 40px;">
                    <div class="stat-box green">
                        <div class="number">565ms</div>
                        <div class="label">Saved per query</div>
                    </div>
                    <div class="stat-box">
                        <div class="number">90%</div>
                        <div class="label">Latency reduction</div>
                    </div>
                    <div class="stat-box green">
                        <div class="number">~0</div>
                        <div class="label">Perceived wait</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SLIDE 21: Quality Results -->
    <div class="slide-container" data-slide="21">
        <div class="slide">
            <div class="slide-header">
                <h1 class="slide-title">SQL Quality: No Degradation</h1>
                <p class="slide-subtitle">Confirming our correctness guarantee</p>
            </div>
            <div class="content">
                <table class="data-table" style="max-width: 900px; margin: 0 auto 40px auto;">
                    <thead>
                        <tr>
                            <th>Metric</th>
                            <th>Baseline</th>
                            <th>APITS (Ours)</th>
                            <th>Difference</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Execution Accuracy</strong></td>
                            <td>70.4%</td>
                            <td class="speedup">71.2%</td>
                            <td class="speedup">+0.8%</td>
                        </tr>
                        <tr>
                            <td><strong>Exact Match</strong></td>
                            <td>46.3%</td>
                            <td class="speedup">46.8%</td>
                            <td class="speedup">+0.5%</td>
                        </tr>
                        <tr>
                            <td><strong>Total Eval Time</strong></td>
                            <td>1170s</td>
                            <td class="speedup">1040s</td>
                            <td class="speedup">-11%</td>
                        </tr>
                    </tbody>
                </table>
                <div class="key-finding">
                    Identical quality - only difference is latency!
                </div>
                <div class="highlight-box"
                    style="margin-top: 30px; max-width: 800px; margin-left: auto; margin-right: auto;">
                    <p style="color: #888; font-size: 24px; text-align: center;">
                        Small accuracy variation is within noise.<br>
                        The generation process is mathematically identical.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- SLIDE 22: Key Observations -->
    <div class="slide-container" data-slide="22">
        <div class="slide">
            <div class="slide-header">
                <h1 class="slide-title">Key Observations</h1>
                <p class="slide-subtitle">What affects the speedup?</p>
            </div>
            <div class="content">
                <div class="two-column">
                    <div>
                        <h3 style="color: #00d4aa;">Factors That Increase Benefit</h3>
                        <div class="highlight-box" style="margin-bottom: 15px;">
                            <h4>Longer Prompts</h4>
                            <p style="color: #888; font-size: 22px;">
                                More prefill to overlap with typing = greater speedup
                            </p>
                        </div>
                        <div class="highlight-box" style="margin-bottom: 15px;">
                            <h4>Slower Typers</h4>
                            <p style="color: #888; font-size: 22px;">
                                More time to build cache = cache more complete at submit
                            </p>
                        </div>
                        <div class="highlight-box">
                            <h4>Complex Schemas</h4>
                            <p style="color: #888; font-size: 22px;">
                                More tokens in schema context = more to prefill
                            </p>
                        </div>
                    </div>
                    <div>
                        <h3 style="color: #ef4444;">Limitations</h3>
                        <div class="highlight-box red" style="border-left-color: #ef4444; margin-bottom: 15px;">
                            <h4 style="color: #ef4444;">Fast Typists</h4>
                            <p style="color: #888; font-size: 22px;">
                                May outpace cache building - less overlap achieved
                            </p>
                        </div>
                        <div class="highlight-box red" style="border-left-color: #ef4444; margin-bottom: 15px;">
                            <h4 style="color: #ef4444;">Heavy Editing</h4>
                            <p style="color: #888; font-size: 22px;">
                                Lots of backspace = wasted cache entries
                            </p>
                        </div>
                        <div class="highlight-box red" style="border-left-color: #ef4444;">
                            <h4 style="color: #ef4444;">Network Latency</h4>
                            <p style="color: #888; font-size: 22px;">
                                WebSocket overhead in cloud deployments
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SLIDE 23: Section - Conclusion -->
    <div class="slide-container" data-slide="23">
        <div class="slide section-slide">
            <div class="section-number">08</div>
            <h2 class="section-title">Conclusion</h2>
            <p class="section-subtitle">Summary and future work</p>
        </div>
    </div>

    <!-- SLIDE 24: Summary -->
    <div class="slide-container" data-slide="24">
        <div class="slide">
            <div class="slide-header">
                <h1 class="slide-title">Summary</h1>
                <p class="slide-subtitle">What we achieved</p>
            </div>
            <div class="content" style="align-items: center;">
                <div style="max-width: 900px;">
                    <ul class="bullet-list" style="font-size: 28px; margin-bottom: 40px;">
                        <li>Identified <strong>wasted typing time</strong> as optimization opportunity</li>
                        <li>Developed <strong>extend</strong> and <strong>crop</strong> cache operations</li>
                        <li>Achieved <strong>10x TTFT speedup</strong> with zero accuracy loss</li>
                        <li>Works with any decoder-only LLM supporting DynamicCache</li>
                    </ul>
                    <div class="four-boxes">
                        <div class="stat-box green">
                            <div class="number">10x</div>
                            <div class="label">TTFT Speedup</div>
                        </div>
                        <div class="stat-box">
                            <div class="number">71%</div>
                            <div class="label">Exec Accuracy</div>
                        </div>
                        <div class="stat-box green">
                            <div class="number">378</div>
                            <div class="label">Test Cases</div>
                        </div>
                        <div class="stat-box">
                            <div class="number">0%</div>
                            <div class="label">Quality Loss</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SLIDE 25: Future Work -->
    <div class="slide-container" data-slide="25">
        <div class="slide">
            <div class="slide-header">
                <h1 class="slide-title">Future Work</h1>
                <p class="slide-subtitle">Where to go from here</p>
            </div>
            <div class="content">
                <div class="three-boxes">
                    <div class="highlight-box">
                        <h4>Predictive Speculation</h4>
                        <p style="color: #888; font-size: 22px;">
                            Predict tokens beyond confirmed boundaries. Use lightweight draft model for speculation.
                        </p>
                    </div>
                    <div class="highlight-box purple">
                        <h4 style="color: #6366f1;">Adaptive Confirmation</h4>
                        <p style="color: #888; font-size: 22px;">
                            Learn typing patterns per user. Adjust debounce timing dynamically.
                        </p>
                    </div>
                    <div class="highlight-box">
                        <h4>Shared Caches</h4>
                        <p style="color: #888; font-size: 22px;">
                            Multi-tenant optimization. Share base prompt cache across users.
                        </p>
                    </div>
                </div>
                <div class="highlight-box"
                    style="margin-top: 30px; max-width: 800px; margin-left: auto; margin-right: auto;">
                    <h4>Broader Applications</h4>
                    <p style="color: #888; font-size: 24px;">
                        Any interactive LLM application can benefit:<br>
                        <strong>Code completion, chat assistants, document drafting, search queries</strong>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- SLIDE 26: Thank You -->
    <div class="slide-container" data-slide="26">
        <div class="slide title-slide">
            <h1 class="slide-title" style="font-size: 64px; margin-bottom: 40px;">Thank You!</h1>
            <div class="hook-box" style="margin-bottom: 40px; max-width: 700px;">
                <strong>APITS:</strong> Anticipatory Prefill with Keystroke Streaming<br>
                10x faster Text-to-SQL with zero quality loss
            </div>
            <p style="font-size: 36px; color: #6366f1; font-weight: 600;">Questions?</p>
        </div>
    </div>

    <!-- Slide Indicator -->
    <div class="slide-indicator">
        <span id="current-slide">1</span> / 26
    </div>

    <script>
        let currentSlide = 1;
        const totalSlides = 26;

        function showSlide(n) {
            document.querySelectorAll('.slide-container').forEach(s => s.classList.remove('active'));
            const target = document.querySelector(`.slide-container[data-slide="${n}"]`);
            if (target) {
                target.classList.add('active');
                currentSlide = n;
                document.getElementById('current-slide').textContent = currentSlide;
            }
        }

        function next() { if (currentSlide < totalSlides) showSlide(currentSlide + 1); }
        function prev() { if (currentSlide > 1) showSlide(currentSlide - 1); }

        document.addEventListener('keydown', e => {
            if (e.key === 'f' || e.key === 'F') {
                if (!document.fullscreenElement) document.documentElement.requestFullscreen();
                else document.exitFullscreen();
            }
            if ([' ', 'ArrowRight', 'Enter'].includes(e.key)) { e.preventDefault(); next(); }
            if (['ArrowLeft', 'Backspace'].includes(e.key)) { e.preventDefault(); prev(); }
            if (e.key === 'Home') { e.preventDefault(); showSlide(1); }
            if (e.key === 'End') { e.preventDefault(); showSlide(totalSlides); }
        });

        document.addEventListener('click', e => {
            const w = document.body.getBoundingClientRect().width;
            if (e.clientX > w * 0.7) next();
            else if (e.clientX < w * 0.3) prev();
        });

        let touchX = 0;
        document.addEventListener('touchstart', e => touchX = e.changedTouches[0].screenX);
        document.addEventListener('touchend', e => {
            const diff = touchX - e.changedTouches[0].screenX;
            if (Math.abs(diff) > 50) diff > 0 ? next() : prev();
        });

        showSlide(1);
    </script>
</body>

</html>